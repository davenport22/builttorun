import{c as p,l as u,u as f,j as e,L as h,b}from"./index-BRLjwUl5.js";import{P as l}from"./page-container-CooLEeSj.js";import{b as g,c as j,S as N,E as k,U as w}from"./use-events-Dw3opNDw.js";import{d as o,a as d}from"./formatting-6Y3PSrOr.js";import{g as v}from"./images-if8H7XIe.js";import{C as y}from"./calendar-Dynw39cp.js";import{M as _}from"./map-pin-Cg3AAMPG.js";import"./useMutation-BnaJWjYm.js";const C=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],P=p("arrow-left",C);function E(a){const r=[`*${a.name}*`];return r.push(`Date: ${o(a.date)}`),a.location&&r.push(`Location: ${a.location}`),a.distance_km&&r.push(`Distance: ${d(a.distance_km)} km`),a.website_url&&r.push(a.website_url),r.push(`
Join me on Built to Run!`),`https://wa.me/?text=${encodeURIComponent(r.join(`
`))}`}function M(){const{id:a}=u(),{user:r}=f(),{data:t,isLoading:c}=g(a),n=j();if(c)return e.jsx(l,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(h,{className:"h-5 w-5 animate-spin text-brand-teal"})})});if(!t)return e.jsx(l,{children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Event not found."})});const i=t.participations?.find(s=>s.user_id===r?.id),m=t.participations?.filter(s=>s.status==="going").length??0,x=t.participations?.filter(s=>s.status==="interested").length??0;return e.jsxs(l,{children:[e.jsxs(b,{to:"/events",className:"mb-4 inline-flex items-center gap-1 text-sm font-medium text-muted-foreground hover:text-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"relative -mx-4 mb-6 overflow-hidden rounded-2xl",children:[e.jsx("img",{src:v(0),alt:"",className:"h-44 w-full object-cover grayscale"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-dark-petrol/80 to-transparent"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex items-end justify-between p-4",children:[e.jsx("h1",{className:"text-xl font-extrabold text-white",children:t.name}),e.jsx("a",{href:E(t),target:"_blank",rel:"noopener noreferrer",className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/90 shadow-sm backdrop-blur-sm transition-transform hover:scale-110",title:"Share via WhatsApp",children:e.jsx(N,{className:"h-4 w-4 text-brand-dark-petrol"})})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(y,{className:"h-4 w-4 text-brand-teal"}),o(t.date)]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(_,{className:"h-4 w-4 text-brand-teal"}),t.location]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.distance_km&&e.jsxs("span",{className:"rounded-full bg-brand-dark-petrol/10 px-2.5 py-0.5 text-xs font-bold text-brand-dark-petrol",children:[d(t.distance_km)," km"]}),t.offices&&e.jsx("span",{className:"rounded-full px-2.5 py-0.5 text-xs font-bold text-white",style:{backgroundColor:t.offices.color_theme??"#00677F"},children:t.offices.name})]}),t.website_url&&e.jsxs("a",{href:t.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm font-bold text-brand-dark-petrol hover:underline",children:[e.jsx(k,{className:"h-4 w-4"}),"Event Website"]})]}),e.jsxs("div",{className:"mb-5 flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(w,{className:"h-4 w-4 text-brand-mint"}),e.jsx("span",{className:"font-bold",children:m})," going"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-bold",children:x})," interested"]})]}),e.jsxs("div",{className:"flex gap-2.5",children:[e.jsx("button",{onClick:()=>n.mutate({eventId:t.id,status:"going"}),disabled:n.isPending,className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-bold transition-all ${i?.status==="going"?"bg-brand-mint text-brand-dark-petrol shadow-sm":"border-2 border-brand-dark-petrol/20 text-brand-dark-petrol hover:bg-brand-dark-petrol/5"}`,children:i?.status==="going"?"I'm Going!":"I'll Run"}),e.jsx("button",{onClick:()=>n.mutate({eventId:t.id,status:"interested"}),disabled:n.isPending,className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-bold transition-all ${i?.status==="interested"?"bg-brand-mint/40 text-brand-dark-petrol shadow-sm":"border-2 border-border text-muted-foreground hover:bg-gray-50"}`,children:"Shortlisted"})]}),t.participations&&t.participations.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"mb-3 text-sm font-bold text-brand-dark-petrol",children:"Participants"}),e.jsx("div",{className:"flex flex-col gap-2",children:t.participations.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-brand-dark-petrol text-xs font-bold text-white",children:s.profiles?.name?.charAt(0)?.toUpperCase()??"?"}),e.jsx("span",{className:"font-medium",children:s.profiles?.name??"Unknown"})]}),e.jsx("span",{className:`rounded-full px-2.5 py-0.5 text-xs font-bold ${s.status==="going"?"bg-brand-mint/20 text-brand-dark-petrol":"bg-gray-200 text-muted-foreground"}`,children:s.status==="interested"?"shortlisted":s.status})]},s.user_id))})]})]})]})}export{M as default};
