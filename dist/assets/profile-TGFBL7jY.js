import{c as l,u as g,h as j,r as N,j as e,L as i}from"./index-BRLjwUl5.js";import{P as c}from"./page-container-CooLEeSj.js";import{u as w,a as k}from"./use-profile-BXE7ia1g.js";import{u as v}from"./use-offices-BdtzSyWv.js";import{M as y}from"./map-pin-Cg3AAMPG.js";import{C as P}from"./check-Bb7JHISM.js";import"./useMutation-BnaJWjYm.js";const C=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],O=l("chevron-down",C);const _=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],L=l("log-out",_);const S=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],M=l("mail",S);function U(){const{user:x,signOut:m}=g(),{data:s,isLoading:u}=w(),{data:f}=v(),a=k(),h=j(),[r,d]=N.useState(!1),p=async()=>{await m(),h("/login")},b=async t=>{await a.mutateAsync({office_id:t}),d(!1)};if(u)return e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(i,{className:"h-5 w-5 animate-spin text-brand-teal"})})});const n=s?.offices;return e.jsxs(c,{children:[e.jsx("h1",{className:"mb-1 text-xl font-extrabold text-brand-dark-petrol",children:"Profile"}),e.jsx("p",{className:"mb-5 text-xs text-muted-foreground",children:"Your account details"}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-brand-dark-petrol",children:e.jsx("span",{className:"text-xl font-black text-white",children:s?.name?.charAt(0)?.toUpperCase()??"R"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-extrabold text-brand-dark-petrol",children:s?.name??"Runner"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(M,{className:"h-3.5 w-3.5"}),x?.email]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"mb-2 block text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Home Office"}),e.jsxs("button",{onClick:()=>d(!r),className:"flex w-full items-center justify-between rounded-2xl bg-brand-dark-petrol/5 px-4 py-3.5 transition-colors hover:bg-brand-dark-petrol/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-brand-teal"}),n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-bold text-brand-dark-petrol",children:n.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["â€” ",n.location]})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Select your office"})]}),e.jsx(O,{className:`h-4 w-4 text-muted-foreground transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsx("div",{className:"mt-2 flex flex-col gap-1 rounded-2xl border border-border bg-white p-2 shadow-md",children:f?.map(t=>{const o=t.id===s?.office_id;return e.jsxs("button",{onClick:()=>b(t.id),disabled:a.isPending,className:`flex items-center justify-between rounded-xl px-3 py-2.5 text-left text-sm transition-colors ${o?"bg-brand-mint/15 font-bold text-brand-dark-petrol":"text-foreground hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:t.color_theme??"#00677F"}}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:t.name}),e.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground",children:t.location})]})]}),o&&e.jsx(P,{className:"h-4 w-4 text-brand-teal"}),a.isPending&&!o&&e.jsx(i,{className:"h-3.5 w-3.5 animate-spin text-muted-foreground"})]},t.id)})})]}),e.jsxs("button",{onClick:p,className:"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-destructive/20 py-3 text-sm font-bold text-destructive transition-colors hover:bg-destructive/5",children:[e.jsx(L,{className:"h-4 w-4"}),"Sign Out"]})]})]})}export{U as default};
