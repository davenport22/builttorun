import{c as o,j as e,r as c,L as x,T as m,b as h,R as u,C as f}from"./index-BRLjwUl5.js";import{P as p}from"./page-container-CooLEeSj.js";import{a as j,d as N}from"./use-races-Bfw9PVRB.js";import{d as b,a as n,b as g,f as v}from"./formatting-6Y3PSrOr.js";import{M as y}from"./mountain-Bhx1rOsA.js";import"./useMutation-BnaJWjYm.js";const k=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],w=o("trash-2",k);function _({race:t,onDelete:a}){return e.jsxs("div",{className:"rounded-2xl bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-brand-dark-petrol",children:t.race_name}),t.elevation_boost&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 rounded-full bg-brand-mint/20 px-2 py-0.5 text-xs font-bold text-brand-teal",children:[e.jsx(y,{className:"h-3 w-3"}),"+10%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b(t.date)})]}),a&&e.jsx("button",{onClick:()=>a(t),className:"rounded-xl p-2 text-muted-foreground/40 transition-colors hover:bg-destructive/10 hover:text-destructive","aria-label":"Delete race",children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Distance"}),e.jsxs("p",{className:"text-lg font-extrabold text-brand-dark-petrol",children:[n(Number(t.scored_distance_km)),e.jsx("span",{className:"text-xs font-bold",children:" km"})]}),t.elevation_boost&&e.jsxs("p",{className:"text-xs font-medium text-brand-teal",children:["(",n(Number(t.distance_km))," actual)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time"}),e.jsx("p",{className:"text-lg font-extrabold text-brand-dark-petrol",children:g(t.time_seconds)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pace"}),e.jsx("p",{className:"text-lg font-extrabold text-brand-dark-petrol",children:v(Number(t.distance_km),t.time_seconds)})]})]})]})}function M(){const{data:t,isLoading:a}=j(),d=N(),[l,r]=c.useState(null),i=async s=>{if(confirm("Delete this race? This cannot be undone.")){r(s.id);try{await d.mutateAsync({id:s.id,screenshot_url:s.screenshot_url})}finally{r(null)}}};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(x,{className:"h-5 w-5 animate-spin text-brand-teal"})}):!t||t.length===0?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-12 text-center",children:[e.jsx(m,{className:"h-12 w-12 text-gray-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground",children:"No races yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your first race result to get started!"})]})]}):e.jsx("div",{className:"flex flex-col gap-3",children:t.map(s=>e.jsx("div",{className:l===s.id?"opacity-50":"",children:e.jsx(_,{race:s,onDelete:i})},s.id))})}function A(){return e.jsxs(p,{children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-extrabold text-brand-dark-petrol",children:"My Races"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your running history"})]}),e.jsxs(h,{to:u.UPLOAD,className:"flex items-center gap-1.5 rounded-xl bg-brand-dark-petrol px-4 py-2 text-sm font-bold text-white shadow-lg transition-all hover:shadow-xl",children:[e.jsx(f,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(M,{})]})}export{A as default};
